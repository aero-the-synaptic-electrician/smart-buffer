/**
 * @name SmartBuffer
 * @version 1.0.0
 */

(t=>{'use strict';if(!t.document)throw new Error('SmartBuffer requires a window with a document');t.SmartBuffer=class{constructor(t,e){this.view=new DataView(t),this.offset=e||0}allocate(t){let e=this.length+t;if(e>this.length){let t=new ArrayBuffer(e);new Uint8Array(t).set(new Uint8Array(this.buffer)),this.view=new DataView(t)}}static fromSize(t){return new this(new ArrayBuffer(t))}get buffer(){return this.view.buffer}get length(){return this.view.byteLength}get eof(){return this.offset>=this.length}read(t,e,r,i){let n=t.call(this.view,i||this.offset,r);return i||(this.offset+=e),n}write(t,e,r,i){t.call(this.view,this.offset,r,i),this.offset+=e}readInt8(t){return this.read(DataView.prototype.getInt8,1,null,t)}readUInt8(t){return this.read(DataView.prototype.getUint8,1,null,t)}readInt16LE(t){return this.read(DataView.prototype.getInt16,2,!0,t)}readInt16BE(t){return this.read(DataView.prototype.getInt16,2,!1,t)}readUInt16LE(t){return this.read(DataView.prototype.getUint16,2,!0,t)}readUInt16BE(t){return this.read(DataView.prototype.getUint16,2,!1,t)}readInt32LE(t){return this.read(DataView.prototype.getInt32,4,!0,t)}readInt32BE(t){return this.read(DataView.prototype.getInt32,4,!1,t)}readUInt32LE(t){return this.read(DataView.prototype.getUint32,4,!0,t)}readUInt32BE(t){return this.read(DataView.prototype.getUint32,4,!1,t)}readString16(){let t,e='';for(;t=this.readUInt16LE();!this.eof&&0!==t)e+=String.fromCharCode(t);return e}readString(){let t,e='';for(;t=this.readUInt8();!this.eof&&0!==t)e+=String.fromCharCode(t);return e}writeInt8(t){this.write(DataView.prototype.setInt8,1,t,null)}writeUInt8(t){this.write(DataView.prototype.setUint8,1,t,null)}writeInt16LE(t){this.write(DataView.prototype.setInt16,2,t,!0)}writeInt16BE(t){this.write(DataView.prototype.setInt16,2,t,!1)}writeUInt16LE(t){this.write(DataView.prototype.setUint16,2,t,!0)}writeUInt16BE(t){this.write(DataView.prototype.setUint16,2,t,!1)}writeInt32LE(t){this.write(DataView.prototype.setInt32,4,t,!0)}writeInt32BE(t){this.write(DataView.prototype.setInt32,4,t,!1)}writeUInt32LE(t){this.write(DataView.prototype.setUint32,4,t,!0)}writeUInt32BE(t){this.write(DataView.prototype.setUint32,4,t,!1)}writeString(t){for(let e in this.allocate(t.length),t)this.writeUInt8(t.charCodeAt(e))}writeStringNT(t){this.writeString(t),this.allocate(1),this.writeUInt8(0)}writeEscapedString(t){this.writeString(unescape(encodeURIComponent(t)))}}})('undefined'==typeof window?this:window);
